type: resource
name: NanoInstance
types:
  - name: ServerConfig
    properties:
      host:
        type: STRING
        required: true
      port:
        type: INT32
      httpPort:
        type: INT32
      insecure:
        type: BOOLEAN
        required: true
        defaultValue: false
      authentication:
        type: STRUCT
        required: true
        typeRef: ServerConfigAuthentication
  - name: ServerConfigAuthentication
    properties:
      username:
        type: STRING
        required: false
      password:
        type: STRING
        required: false
      token:
        type: STRING
        required: false
  - name: InstanceLimitations
    properties:
      maxConcurrentExecutions:
        type: INT32
        required: false
        defaultValue: 2
      maxExecutionTime:
        type: INT32
        required: false
        defaultValue: 1500
properties:
  name:
    type: STRING
    length: 255
    required: true
    unique: true
  serverConfig:
    type: STRUCT
    required: true
    typeRef: ServerConfig
  limitations:
    type: STRUCT
    required: false
    typeRef: InstanceLimitations
  annotations:
    type: MAP
    required: false
    item:
      type: STRING
annotations:
  EnableAudit: "true"
